extends layout

block content 
  h1 Question for skill - 
    a(href=question.skill.url) #{question.skill.name}

  hr
  p 
    b Question text
  p!= question.html

  hr
  
  - if (options.length)
    p
      b Options

    form(method='GET' action='')
      div.form-group
        - for (var i = 0; i < options.length; i++)
          div.form-check(style="margin-bottom:15px;")
            input.form-check-input(type='checkbox' name='options'+i id='option'+i value=options[i]._id checked=options[i].if_checked)
            | 
            b(style="margin-right:5px;") Option!{i+1}
            label.form-check-label(for='option'+i style='font-weight:unset')
            - if (options[i].category==='text')
              - if (options[i].if_correct!==undefined)
                - if (options[i].if_correct)
                  |
                  b(style='color:green') !{options[i].text}
                - else 
                  |
                  b(style='color:red') !{options[i].text}
              - else 
                | !{options[i].text}

            - if (options[i].category==='audio')
              audio(preload="auto" autobuffer controls style="vertical-align:middle;")
                source(src=options[i].audio)
              - if (options[i].if_correct!==undefined)
                - if (options[i].if_correct)
                  p(style='display:inline-block')
                    b(style='color:green') - Correct.
                - else 
                  p(style='display:inline-block')
                    b(style='color:red') - Incorrect.

            - if (options[i].category==='picture')
              img(src=options[i].picture alt="picture for option"+(i+1) style="display:inline-block;height:80px;vertical-align:middle;")
              - if (options[i].if_correct!==undefined)
                - if (options[i].if_correct)
                  p(style='display:inline-block')
                    b(style='color:green') - Correct.
                - else 
                  p(style='display:inline-block')
                    b(style='color:red') - Incorrect.
                
      hr
      - if (question.all_correct!==undefined&&!question.all_correct)
        p You didn't check all the correct answers.
      - for (var i = 0; i < options.length; i++)
        - if (options[i].if_checked!==undefined&&!options[i].if_correct)
          p 
            b Feedback for option#{i+1}: 
            | #{options[i].feedback}
      button.btn.btn-primary.submit-button(type='submit') Submit
  - else
    p
      b No options to display

  script(src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js")
  script(src="/javascripts/question_detail.js")